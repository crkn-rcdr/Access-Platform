{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "/dipstaging/Dipstaging",
  "title": "Dipstaging",
  "description": "dipstaging documents are generated for every AIP in the legacy preservation platform. They imply the availability of an AIP for import into the access platform.",
  "type": "object",
  "properties": {
    "id": {
      "type": "string"
    },
    "_rev": {
      "description": "The CouchDB revision string for this document. If it doesn't have one, it has yet to be inserted into CouchDB.",
      "type": "string",
      "nullable": true
    },
    "slug": {
      "type": "string",
      "format": "slug",
      "nullable": true,
      "description": "Human-readable identifier used to retrieve this object. Any such object without a slug will not be retrievable without access to the object's Noid."
    },
    "repos": {
      "description": "array of repositories which has this AIP",
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1
    },
    "reposManifestDate": {
      "oneOf": [
        {
          "description": "Number of seconds after the Unix epoch",
          "type": "number"
        },
        {
          "description": "An ISO 6801 timestamp akin to JSON Schema's `date-time`, but only accepts times in UTC. Note that decimal places after the number of seconds are not allowed.",
          "type": "string",
          "pattern": "^\\d{4}-(?:0\\d|1[0-2])-(?:[0-2]\\d|3[0-1])T[0-2]\\d:[0-5]\\d:(?:[0-5]\\d|60)Z$"
        }
      ],
      "description": "date on the AIP manifest. Used to detect when the AIP has been updated, so this date should be stored with any processing."
    },
    "reposDate": {
      "oneOf": [
        {
          "description": "Number of seconds after the Unix epoch",
          "type": "number"
        },
        {
          "description": "An ISO 6801 timestamp akin to JSON Schema's `date-time`, but only accepts times in UTC. Note that decimal places after the number of seconds are not allowed.",
          "type": "string",
          "pattern": "^\\d{4}-(?:0\\d|1[0-2])-(?:[0-2]\\d|3[0-1])T[0-2]\\d:[0-5]\\d:(?:[0-5]\\d|60)Z$"
        }
      ],
      "description": "date when the above two fields were filled in."
    },
    "METS": {
      "type": "array",
      "items": {
        "$comment": "",
        "title": "",
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "format": "unixFilePath",
            "description": "",
            "$comment": ""
          },
          "md5": {
            "type": "string",
            "description": "",
            "$comment": "",
            "pattern": "^[0-9a-f]{32}$"
          }
        }
      }
    },
    "METSManifestDate": {
      "oneOf": [
        {
          "description": "Number of seconds after the Unix epoch",
          "type": "number"
        },
        {
          "description": "An ISO 6801 timestamp akin to JSON Schema's `date-time`, but only accepts times in UTC. Note that decimal places after the number of seconds are not allowed.",
          "type": "string",
          "pattern": "^\\d{4}-(?:0\\d|1[0-2])-(?:[0-2]\\d|3[0-1])T[0-2]\\d:[0-5]\\d:(?:[0-5]\\d|60)Z$"
        }
      ],
      "description": "date on the AIP manifest when this field was filled in"
    },
    "METSDate": {
      "oneOf": [
        {
          "description": "Number of seconds after the Unix epoch",
          "type": "number"
        },
        {
          "description": "An ISO 6801 timestamp akin to JSON Schema's `date-time`, but only accepts times in UTC. Note that decimal places after the number of seconds are not allowed.",
          "type": "string",
          "pattern": "^\\d{4}-(?:0\\d|1[0-2])-(?:[0-2]\\d|3[0-1])T[0-2]\\d:[0-5]\\d:(?:[0-5]\\d|60)Z$"
        }
      ],
      "description": "date when the above two fields were filled in."
    },
    "updated": {
      "oneOf": [
        {
          "description": "Number of seconds after the Unix epoch",
          "type": "number"
        },
        {
          "description": "An ISO 6801 timestamp akin to JSON Schema's `date-time`, but only accepts times in UTC. Note that decimal places after the number of seconds are not allowed.",
          "type": "string",
          "pattern": "^\\d{4}-(?:0\\d|1[0-2])-(?:[0-2]\\d|3[0-1])T[0-2]\\d:[0-5]\\d:(?:[0-5]\\d|60)Z$"
        }
      ],
      "description": "date when this document was last updated"
    },
    "smelt": {
      "title": "Process update",
      "description": "An object that describes a request for and the output of an automated process that is applied to the parent object.",
      "type": "object",
      "properties": {
        "requestDate": {
          "oneOf": [
            {
              "description": "Number of seconds after the Unix epoch",
              "type": "number"
            },
            {
              "description": "An ISO 6801 timestamp akin to JSON Schema's `date-time`, but only accepts times in UTC. Note that decimal places after the number of seconds are not allowed.",
              "type": "string",
              "pattern": "^\\d{4}-(?:0\\d|1[0-2])-(?:[0-2]\\d|3[0-1])T[0-2]\\d:[0-5]\\d:(?:[0-5]\\d|60)Z$"
            }
          ],
          "description": "Most recent request time for the automated process to run."
        },
        "processDate": {
          "oneOf": [
            {
              "description": "Number of seconds after the Unix epoch",
              "type": "number"
            },
            {
              "description": "An ISO 6801 timestamp akin to JSON Schema's `date-time`, but only accepts times in UTC. Note that decimal places after the number of seconds are not allowed.",
              "type": "string",
              "pattern": "^\\d{4}-(?:0\\d|1[0-2])-(?:[0-2]\\d|3[0-1])T[0-2]\\d:[0-5]\\d:(?:[0-5]\\d|60)Z$"
            }
          ],
          "description": "Most recent time the process update took place."
        },
        "succeeded": {
          "type": "boolean",
          "nullable": true,
          "description": "Whether the last process was run successfully on this object."
        },
        "message": {
          "type": "string",
          "nullable": true,
          "description": "Error message supplied by the process."
        }
      },
      "required": [
        "requestDate"
      ],
      "additionalProperties": false
    },
    "staff": {
      "$comment": "",
      "title": "",
      "type": "object",
      "properties": {
        "by": {
          "$comment": "",
          "title": "",
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "",
              "$comment": "",
              "pattern": "^.+$"
            },
            "email": {
              "type": "string",
              "description": "",
              "$comment": "",
              "pattern": "^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$"
            }
          },
          "required": [
            "name",
            "email"
          ],
          "description": ""
        },
        "date": {
          "oneOf": [
            {
              "description": "Number of seconds after the Unix epoch",
              "type": "number"
            },
            {
              "description": "An ISO 6801 timestamp akin to JSON Schema's `date-time`, but only accepts times in UTC. Note that decimal places after the number of seconds are not allowed.",
              "type": "string",
              "pattern": "^\\d{4}-(?:0\\d|1[0-2])-(?:[0-2]\\d|3[0-1])T[0-2]\\d:[0-5]\\d:(?:[0-5]\\d|60)Z$"
            }
          ],
          "description": ""
        }
      },
      "required": [
        "by",
        "date"
      ],
      "description": "Reference to the base image file."
    }
  },
  "required": [
    "id",
    "repos",
    "reposManifestDate",
    "reposDate",
    "METS",
    "METSManifestDate",
    "METSDate",
    "updated"
  ],
  "additionalProperties": false
}
