{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://github.com/crkn-rcdr/Access-Platform/blob/master/Databases/schemas/canvas.json",
  "title": "Canvas Document Schema",
  "description": "",
  "type": "object",
  "properties": {
    "_id": { "$ref": "schemas/_util.json#/definitions/canvasNoid" },
    "_rev": { "$ref": "schemas/_util.json#/definitions/_rev" },
    "master": {
      "description": "Path to and information about this canvas's master image",
      "type": "object",
      "properties": {
        "url": { "$ref": "schemas/_util.json#/definitions/legacyRepoURL" },
        "mime": { "$ref": "schemas/_util.json#/definitions/mime" },
        "size": { "type": "number" },
        "width": { "type": "number" },
        "height": { "type": "number" }
      },
      "required": ["url", "mime", "size", "width", "height"]
    },
    "ocrPdf": {
      "description": "Path to and information about the derivative PDF generated by OCR",
      "type": "object",
      "properties": {
        "url": { "$ref": "schemas/_util.json#/definitions/legacyRepoURL" },
        "size": { "type": "number" }
      },
      "required": ["url", "size"]
    },
    "ocrType": {
      "description": "The type of the OCR XML data associated with this canvas",
      "type": "string",
      "enum": ["alto", "txtmap"]
    },
    "public": {
      "allOf": [
        {
          "description": "Date on which canvas was made public. Remove to take down"
        },
        { "$ref": "schemas/_util.json#/definitions/iso8601datetime" }
      ]
    },
    "source": {
      "description": "Information about this canvas's preservation origin",
      "type": "object",
      "properties": {
        "from": {
          "description": "Source type. cihm: legacy Canadiana preservation. am: CRKN Archivematica installation",
          "type": "string",
          "enum": ["cihm", "am"]
        },
        "path": {
          "description": "cihm Swift path to source image",
          "type": "string"
        },
        "aipId": { "description": "Archivematica AIP ID", "type": "string" },
        "objId": { "description": "Archivematica Object ID", "type": "string" }
      },
      "required": ["from"]
    },
    "updateInternalmeta": {
      "allOf": [
        {
          "description": "Trigger for updating the manifests that own this canvas in internalmeta, or result of an attempted update"
        },
        { "$ref": "schemas/_util.json#/definitions/update" }
      ]
    }
  },
  "required": ["_id", "_rev", "master", "source"]
}
