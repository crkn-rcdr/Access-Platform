{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://github.com/crkn-rcdr/Access-Platform/blob/master/Databases/canvas.schema.json",
  "title": "Canvas Document Schema",
  "description": "To add:\n* reference to ocr file, if necessary\n* flags for updates",
  "type": "object",
  "properties": {
    "_id": { "$ref": "./_util.schema.json#/definitions/canvasNoid" },
    "_rev": { "$ref": "./_util.schema.json#/definitions/_rev" },
    "slugs": {
      "description": "List of human-readable identifiers (in the form '$manifestSlug/$seq'",
      "type": "array",
      "items": { "type": "string", "pattern": "^.+/[0-9].+" }
    },
    "supersededBy": {
      "description": "Canvas which supersedes this one",
      "$ref": "./_util.schema.json#/definitions/canvasNoid"
    },
    "master": {
      "description": "Path to and information about this canvas's master image",
      "type": "object",
      "properties": {
        "url": { "$ref": "./_util.schema.json#/definitions/legacyRepoURL" },
        "mime": { "$ref": "./_util.schema.json#/definitions/mime" },
        "size": { "type": "number" },
        "width": { "type": "number" },
        "height": { "type": "number" }
      },
      "required": ["url", "mime", "size", "width", "height"]
    },
    "download": {
      "description": "Path to and information about a downloadable file for this object (usually a PDF)",
      "type": "object",
      "properties": {
        "url": { "$ref": "./_util.schema.json#/definitions/legacyRepoURL" },
        "mime": { "$ref": "./_util.schema.json#/definitions/mime" },
        "size": { "type": "number" }
      },
      "required": ["url", "mime", "size"]
    }
  },
  "required": ["_id", "_rev", "master"]
}
