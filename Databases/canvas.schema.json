{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://github.com/crkn-rcdr/Access-Platform/blob/master/Databases/canvas.schema.json",
  "title": "Canvas Document Schema",
  "description": "",
  "type": "object",
  "properties": {
    "_id": { "$ref": "./_util.schema.json#/definitions/canvasNoid" },
    "_rev": { "$ref": "./_util.schema.json#/definitions/_rev" },
    "slugs": {
      "description": "List of human-readable identifiers (in the form '$manifestSlug/$seq'",
      "type": "array",
      "items": { "type": "string", "pattern": "^.+/[0-9].+" }
    },
    "master": {
      "description": "Path to and information about this canvas's master image",
      "type": "object",
      "properties": {
        "url": { "$ref": "./_util.schema.json#/definitions/legacyRepoURL" },
        "mime": { "$ref": "./_util.schema.json#/definitions/mime" },
        "size": { "type": "number" },
        "width": { "type": "number" },
        "height": { "type": "number" }
      },
      "required": ["url", "mime", "size", "width", "height"]
    },
    "download": {
      "description": "Path to and information about a downloadable file for this object (usually a PDF)",
      "type": "object",
      "properties": {
        "url": { "$ref": "./_util.schema.json#/definitions/legacyRepoURL" },
        "mime": { "$ref": "./_util.schema.json#/definitions/mime" },
        "size": { "type": "number" }
      },
      "required": ["url", "mime", "size"]
    },
    "ocrType": {
      "description": "The type of the OCR XML data associated with this canvas",
      "type": "string",
      "enum": ["alto", "txtmap"]
    },
    "source": {
      "description": "Information about this canvas's preservation origin",
      "type": "object",
      "properties": {
        "from": {
          "description": "Source type. cihm: legacy Canadiana preservation. am: CRKN Archivematica installation",
          "type": "string",
          "enum": ["cihm", "am"]
        },
        "path": {
          "description": "cihm Swift path to source image",
          "type": "string"
        },
        "aipId": { "description": "Archivematica AIP ID", "type": "string" },
        "objId": { "description": "Archivematica Object ID", "type": "string" }
      },
      "required": ["from"]
    },
    "updateInternalmeta": {
      "description": "Trigger for updating the manifests that own this canvas in the internalmeta database, or result of an attempted update",
      "type": "object",
      "properties": {
        "requestDate": {
          "$ref": "./_util.schema.json#/definitions/iso8601datetime"
        },
        "processDate": {
          "$ref": "./_util.schema.json#/definitions/iso8601datetime"
        },
        "succeeded": { "type": "boolean" },
        "message": { "type": "string" }
      },
      "required": ["requestDate"]
    }
  },
  "required": ["_id", "_rev", "master", "source"]
}
